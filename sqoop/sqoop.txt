sqoop导不支持的数据类型
sqoop import --connect jdbc:postgresql://XXX.XX.XXX.XXX:5432/iAtlas --table msg02 --username aaaa.bbbbb --password ccccc --schema tracking --map-column-java wsresp=String --map-column-hive wsresp=STRING

#!/bin/bash
declare -A map=()

a=""
b=""
c=0
while read line
do
        if [[ "$line" == *"CREATE EXTERNAL TABLE"* ]];then
                a=`echo ${line}|awk -F' ' '{print $NF}'`
                b=""
        elif [[ "$line" == "("* ]];then
		c=`expr ${c} + 1 `
                echo "ʲô������"${c}"����"
        elif [[ "$line" == ")"* ]];then
#               echo ${a%,*} >> out.sh
                map[$a]=${b%,*}
        else
                b=${b}`echo ${line}|awk -F' ' '{print $1}'`","
        fi
done < /txdb/ods/offline/hive/srdb/srdb.hql

#���뵽hdfs 
#table_name=���� 
#-z ����ѹ����GZip 
#--compression-codec org.apache.hadoop.io.compress.BZip2Codec BZip��ʽ 
databaseip=(`awk -F '|' '{print $1}' /txdb/ods/offline/sqoop/srdb/database_config.cfg`) 
databaseport=(`awk -F '|' '{print $2}' /txdb/ods/offline/sqoop/srdb/database_config.cfg`) 
databasetable=(`awk -F '|' '{print $3}' /txdb/ods/offline/sqoop/srdb/database_config.cfg`) 
databaseuser=(`awk -F '|' '{print $4}' /txdb/ods/offline/sqoop/srdb/database_config.cfg`) 
databasepwd=(`awk -F '|' '{print $5}' /txdb/ods/offline/sqoop/srdb/database_config.cfg`) 
database_model=(`awk -F '|' '{print $6}' /txdb/ods/offline/sqoop/srdb/database_config.cfg`) 


prefix="t_" 
out_table_name="" 
PRONUM=10               #���̸���  
  
tmpfile="$$.fifo"        #��ʱ���ɹܵ��ļ�  
mkfifo $tmpfile  
exec 6<>$tmpfile    #�󶨹ܵ����ļ�������6
rm $tmpfile  
  
for(( i=0; i<$PRONUM; i++ ))  
do  
        echo "init."  
done >&6  
 
while read line   
do   
    read -u6
        {       table_name="$line"
                if [[ "$table_name" == $prefix* ]] 
                then 
                out_table_name=$table_name         
                else 
                out_table_name=$prefix$table_name 
                fi 
                
                
sqoop import \
--connect jdbc:srdbsql://${databaseip[0]}:${databaseport[0]}/${databasetable[0]} \
--driver org.srdbsql.Driver \
--username ${databaseuser[0]} \
--password ${databasepwd[0]} \
--query "select ${map[$out_table_name]} from $database_model.$table_name where \$CONDITIONS" \
-z \
--null-string '' --null-non-string '' \
--delete-target-dir --target-dir /ods/srdb/jk/$out_table_name \
--fields-terminated-by '\001' -m 1 
                if [ $? -ne 0 ] 
                then 
                echo $table_name >> /txdb/ods/offline/sqoop/srdb/jk/impl/BUG_table 
                fi   
                echo    >  &6  # &6��ʾ6ͨ����> &6������ݸ�6ͨ����> 6ֵ���ݸ�6�ļ�
                echo "$table_name finished"
        }  &  
done  < /txdb/ods/offline/sqoop/srdb/test 
#�����������ӽ���ִ�����
wait


>&j
Ĭ�ϵģ��ض����ļ�������1(stdout)��j�����д��ݵ�stdout��������͵�j��ȥ�����ǳ��õģ�
2>&1 #����׼���������1

0< FILENAME
< FILENAME
���ļ��н������롣 ">"�ǳɶ��������ͨ�����ǽ��ʹ�á�

[j]<>filename
���ļ��򿪲��ҷ����ļ�������"j"����������һ�����ļ������ļ���������������һ��ָ�룿��������ļ�"filename"�����ڣ���ô�ʹ�������������ļ�������"j"ûָ������Ĭ����fd 0�� stdin��
#command < input-file > output-file

�ر��ļ���������
n<&-  �ر������ļ�������n
0<&-�� <&-  �ر�stdin
n>&-  �ر�����ļ�������n
1>&-�� >&-  �ر�stdout

����һ�δ��������⣺ 
echo 1234567890 > File
# д�ַ�����"File".
exec 3<> File
 # ��"File"���Ҹ�������fd 3.
read -n 4 <&3
# ֻ��4���ַ�.
echo -n . >&3
# дһ��С����.
exec 3>&-
# �ر�fd 3.
cat File # ==> 1234.67890
 # ����洢.